{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nimport axios from 'axios';\nconst authorMap = {\n  song: '송이',\n  parang: '파랑',\n  dodong: '도동'\n};\nconst toArray = v => {\n  if (Array.isArray(v)) return v;\n  if (!v) return [];\n  return String(v).split(',').map(s => s.trim()).filter(Boolean);\n};\nconst toNumberOrNull = v => {\n  const n = Number(v);\n  return Number.isFinite(n) ? n : null;\n};\nexport default function usePostFestival() {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState(null);\n  const createFestival = useCallback(async currentPost => {\n    setLoading(true);\n    setError(null);\n    setData(null);\n    try {\n      var _currentPost$festival;\n      const fd = (_currentPost$festival = currentPost === null || currentPost === void 0 ? void 0 : currentPost.festivalDetail) !== null && _currentPost$festival !== void 0 ? _currentPost$festival : {};\n      const token = localStorage.getItem('accessToken');\n      const payload = {\n        title: fd.title,\n        // 필수\n        creatorName: fd.creatorName || authorMap[currentPost === null || currentPost === void 0 ? void 0 : currentPost.author] || (currentPost === null || currentPost === void 0 ? void 0 : currentPost.author),\n        startDate: fd.startDate,\n        // 필수\n        endDate: fd.endDate,\n        // 필수\n        startTime: fd.startTime || undefined,\n        // 선택 (있을 때만 전송)\n        endTime: fd.endTime || undefined,\n        // 선택\n        timeDescription: fd.timeDescription || '',\n        latitude: toNumberOrNull(fd.latitude),\n        longitude: toNumberOrNull(fd.longitude),\n        address: fd.address,\n        // 필수\n        fee: fd.fee || '',\n        contact: fd.contact || '',\n        homePageUrl: fd.homePageUrl || '',\n        reservationUrl: fd.reservationUrl || '',\n        description: fd.description || '',\n        onelineDescription: fd.onelineDescription,\n        // 필수\n        mainImage: fd.mainImage,\n        // 필수\n        images: toArray(fd.images)\n      };\n\n      // 빈 값(undefined)은 제거해서 보내기\n      Object.keys(payload).forEach(k => payload[k] === undefined && delete payload[k]);\n      const res = await axios.post('/api/festivals', payload, {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            Authorization: `Bearer ${token}`\n          } : {})\n        },\n        withCredentials: true\n      });\n      setData(res.data);\n      return res.data;\n    } catch (e) {\n      setError(e);\n      throw e;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  return {\n    createFestival,\n    loading,\n    error,\n    data\n  };\n}\n_s(usePostFestival, \"CLNQSQ1bjz4qGC8Z9AJ3nSd4Y3A=\");","map":{"version":3,"names":["useState","useCallback","axios","authorMap","song","parang","dodong","toArray","v","Array","isArray","String","split","map","s","trim","filter","Boolean","toNumberOrNull","n","Number","isFinite","usePostFestival","_s","loading","setLoading","error","setError","data","setData","createFestival","currentPost","_currentPost$festival","fd","festivalDetail","token","localStorage","getItem","payload","title","creatorName","author","startDate","endDate","startTime","undefined","endTime","timeDescription","latitude","longitude","address","fee","contact","homePageUrl","reservationUrl","description","onelineDescription","mainImage","images","Object","keys","forEach","k","res","post","headers","Authorization","withCredentials","e"],"sources":["C:/Users/user/songdodongnae-react/songdodongnae/src/hooks/usePostFestival.js"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst authorMap = {\r\n  song: '송이',\r\n  parang: '파랑',\r\n  dodong: '도동',\r\n \r\n};\r\n\r\nconst toArray = (v) => {\r\n  if (Array.isArray(v)) return v;\r\n  if (!v) return [];\r\n  return String(v).split(',').map(s => s.trim()).filter(Boolean);\r\n};\r\n\r\nconst toNumberOrNull = (v) => {\r\n  const n = Number(v);\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\nexport default function usePostFestival() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError]   = useState(null);\r\n  const [data, setData]     = useState(null);\r\n\r\n  const createFestival = useCallback(async (currentPost) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setData(null);\r\n\r\n    try {\r\n      const fd = currentPost?.festivalDetail ?? {};\r\n      const token = localStorage.getItem('accessToken');\r\n\r\n      const payload = {\r\n        title: fd.title,                                // 필수\r\n        creatorName: fd.creatorName || authorMap[currentPost?.author] || currentPost?.author,\r\n        startDate: fd.startDate,                        // 필수\r\n        endDate: fd.endDate,                            // 필수\r\n        startTime: fd.startTime || undefined,           // 선택 (있을 때만 전송)\r\n        endTime: fd.endTime || undefined,               // 선택\r\n        timeDescription: fd.timeDescription || '',\r\n        latitude: toNumberOrNull(fd.latitude),\r\n        longitude: toNumberOrNull(fd.longitude),\r\n        address: fd.address,                            // 필수\r\n        fee: fd.fee || '',\r\n        contact: fd.contact || '',\r\n        homePageUrl: fd.homePageUrl || '',\r\n        reservationUrl: fd.reservationUrl || '',\r\n        description: fd.description || '',\r\n        onelineDescription: fd.onelineDescription,      // 필수\r\n        mainImage: fd.mainImage,                        // 필수\r\n        images: toArray(fd.images),\r\n      };\r\n\r\n      // 빈 값(undefined)은 제거해서 보내기\r\n      Object.keys(payload).forEach((k) => payload[k] === undefined && delete payload[k]);\r\n\r\n      const res = await axios.post(\r\n        '/api/festivals',\r\n        payload,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n          },\r\n          withCredentials: true,\r\n        }\r\n      );\r\n\r\n      setData(res.data);\r\n      return res.data;\r\n    } catch (e) {\r\n      setError(e);\r\n      throw e;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return { createFestival, loading, error, data };\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}